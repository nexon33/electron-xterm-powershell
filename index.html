<!DOCTYPE html>
<html class="theme-dark">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline';">
  <title>PowerShell Terminal</title>
  <link rel="stylesheet" href="node_modules/xterm/css/xterm.css" />
  <link rel="stylesheet" href="src/css/app.css" />
</head>
<body>
  <div class="app-container">
    <header class="header">
      <h1>PowerShell Terminal</h1>
    </header>

    <div class="toolbar">
      <button id="new-tab-btn" class="toolbar-button">
        New Terminal
      </button>
      <button id="settings-btn" class="toolbar-button">
        Settings
      </button>
      <div class="toolbar-separator"></div>
      <button id="search-btn" class="toolbar-button">
        Search
      </button>
      <button id="clear-btn" class="toolbar-button">
        Clear
      </button>
      <div class="toolbar-separator"></div>
      <button id="theme-toggle-btn" class="toolbar-button">
        Toggle Theme
      </button>
    </div>

    <div id="tabs" class="tabs">
      <!-- Tabs will be generated here dynamically -->
      <button id="new-tab-button" class="new-tab-button">+</button>
    </div>

    <div id="terminals-container" class="terminals-container">
      <!-- Terminal instances will be created here dynamically -->
    </div>

    <div class="status-bar">
      <div id="terminal-info" class="status-item">PowerShell</div>
      <div id="terminal-size" class="status-item">80×24</div>
    </div>
  </div>

  <!-- Context Menu -->
  <div id="context-menu" class="context-menu">
    <div class="context-menu-item" data-action="copy">Copy</div>
    <div class="context-menu-item" data-action="paste">Paste</div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" data-action="search">Search</div>
    <div class="context-menu-item" data-action="clear">Clear</div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" data-action="settings">Settings</div>
  </div>

  <!-- Search Panel -->
  <div id="search-panel" class="search-panel">
    <input type="text" id="search-input" placeholder="Search..." />
    <button id="search-prev-btn">◀</button>
    <button id="search-next-btn">▶</button>
    <button id="search-close-btn">✕</button>
  </div>

  <!-- Settings Modal -->
  <div id="settings-modal" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Terminal Settings</h2>
        <button id="settings-close-btn" class="modal-close">✕</button>
      </div>
      <div class="modal-body">
        <form id="settings-form" class="settings-form">
          <div class="settings-group">
            <h3>Appearance</h3>
            <div class="form-control">
              <label for="font-family">Font Family</label>
              <input type="text" id="font-family" value="Consolas" />
            </div>
            <div class="form-control">
              <label for="font-size">Font Size</label>
              <input type="number" id="font-size" value="14" min="8" max="32" />
            </div>
            <div class="form-control">
              <label for="cursor-style">Cursor Style</label>
              <select id="cursor-style">
                <option value="block">Block</option>
                <option value="underline">Underline</option>
                <option value="bar">Bar</option>
              </select>
            </div>
            <div class="form-control">
              <label>
                <input type="checkbox" id="cursor-blink" checked />
                Cursor Blink
              </label>
            </div>
          </div>
          
          <div class="settings-group">
            <h3>Terminal</h3>
            <div class="form-control">
              <label for="scrollback">Scrollback Lines</label>
              <input type="number" id="scrollback" value="1000" min="100" max="10000" />
            </div>
            <div class="form-control">
              <label>
                <input type="checkbox" id="line-height-auto" checked />
                Auto Line Height
              </label>
            </div>
            <div class="form-control">
              <label>
                <input type="checkbox" id="enable-bell" />
                Enable Bell
              </label>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button id="settings-cancel-btn" class="cancel">Cancel</button>
        <button id="settings-save-btn">Save Changes</button>
      </div>
    </div>
  </div>

  <script src="node_modules/xterm/lib/xterm.js"></script>
  <script src="node_modules/xterm-addon-fit/lib/xterm-addon-fit.js"></script>
  <script src="node_modules/xterm-addon-search/lib/xterm-addon-search.js"></script>
  <script src="node_modules/xterm-addon-web-links/lib/xterm-addon-web-links.js"></script>
  <script src="node_modules/xterm-addon-serialize/lib/xterm-addon-serialize.js"></script>
  <script src="node_modules/xterm-addon-unicode11/lib/xterm-addon-unicode11.js"></script>
  <script src="src/js/terminal.js"></script>
  <script src="src/js/ui.js"></script>
  <script src="src/js/app.js"></script>
</body>
</html>
